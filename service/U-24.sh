#!/bin/bash

echo "=========================="
echo "U-24 (상)"
echo "점검 사항: 불필요한 NFS 서비스 관련 데몬 점검"
echo "=========================="

# 점검 결과 변수 초기화
result="양호"
reason="모든 NFS 관련 데몬이 비활성화 되어 있습니다."

# 점검할 데몬 목록
services=(
    "nfs-server"
    "rpcbind"
    "nfs-mountd"
    "nfs-idmapd"
    "rpc-statd"
    "rpc-rquotad"
    "rpc-nfsd"
    "rpc-lockd"
)

# 각 데몬의 상태를 점검
for service in "${services[@]}"; do
    status=$(sudo systemctl is-active $service)
    if [ "$status" == "active" ]; then
        result="취약"
        reason="$service 데몬이 활성화되어 있습니다."
        break
    fi
done

# 점검 결과 출력
echo "=== 점검 결과: $result ==="
echo "이유: $reason"
